(this["webpackJsonprem-graph-web"]=this["webpackJsonprem-graph-web"]||[]).push([[0],{32:function(e,t,n){e.exports=n(50)},37:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(24),o=n.n(i),c=n(55),u=n(56),s=(n(37),n(30)),d=n(6),l=n.n(d),p=n(10),f=n(19),m=n.n(f),h=n(25),g=n.n(h),v=n(26),b=n.n(v),w=n(1),y=n(27),x=(n(46),n(14)),k=n(21),_=n.n(k),O=function(e){return window.RemNoteAPI.v0.get(e)};var E=function e(t,n,r){var a=t.indexOf(n),i=a+1;if(1===r)return a;var o=e(t.slice(i),n,r-1);return-1===o?-1:i+o};function C(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function j(e){return(new DOMParser).parseFromString("<div>".concat(e,"</div>"),"text/html").body.firstChild}var I=function(e){return e.reduce((function(e,t){var n;return!!(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.source)&&e.some((function(e){var n,r,a,i,o,c;return(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.source)===(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.source)&&(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.target)===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.target)&&(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.target_arrow_shape)===(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.target_arrow_shape)}))?e:e.concat(t)}),[])},P=[],A=[];function F(e){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(l.a.mark((function e(t){var n,r,a,i,o,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:[],r=c.length>2?c[2]:void 0,a=c.length>3?c[3]:void 0,!Array.isArray(t)){e.next=11;break}return e.next=6,Promise.all(t.filter((function(e){return"string"===typeof e||"q"===e.i||"i"===e.i||"m"===e.i})).map(function(){var e=Object(p.a)(l.a.mark((function e(t){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=2;break}return e.abrupt("return",t);case 2:if("m"!==t.i){e.next=7;break}if(!0!==t.x){e.next=6;break}return r=_.a.renderToString(t.text,{throwOnError:!1}),e.abrupt("return",r);case 6:return e.abrupt("return",t.text);case 7:if("i"!==t.i){e.next=9;break}return e.abrupt("return","<img src=".concat(t.url," width=").concat(t.width," height={r.height} />"));case 9:if(!(a=[].concat(P,Object(x.a)(n)).find((function(e){return e._id===t._id})))){e.next=12;break}return e.abrupt("return",{remId:a._id,name:a.name});case 12:return e.next=14,O(t._id);case 14:return i=e.sent,P.push(i),e.abrupt("return",{remId:i._id,name:i.name});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.next=9,Promise.all(i.map(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=2;break}return e.abrupt("return",t);case 2:if(!a){e.next=10;break}return e.t1='<a href="#" data-source="'.concat(r,'" data-target="').concat(t.remId,'" onclick="handleFocus(this)">'),e.next=6,F(t.name,n,void 0,!1);case 6:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2,"</a>"),e.next=11;break;case 10:e.t0=F(t.name,n,void 0,!1);case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return o=e.sent,e.abrupt("return",o.join(""));case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(l.a.mark((function e(t){var n,r,a,i,o,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:[],r=c.length>2?c[2]:void 0,a=c.length>3?c[3]:void 0,!Array.isArray(t)){e.next=11;break}return e.next=6,Promise.all(t.filter((function(e){return"string"===typeof e||"q"===e.i||"i"===e.i||"m"===e.i})).map(function(){var e=Object(p.a)(l.a.mark((function e(t){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=2;break}return e.abrupt("return",t);case 2:if("m"!==t.i){e.next=7;break}if(!0!==t.x){e.next=6;break}return r=_.a.renderToString(t.text,{throwOnError:!1}),e.abrupt("return",r);case 6:return e.abrupt("return",t.text);case 7:if("i"!==t.i){e.next=9;break}return e.abrupt("return","<img src=".concat(t.url," width=").concat(t.width," height={r.height} />"));case 9:if(!(a=[].concat(A,Object(x.a)(n)).find((function(e){return e._id===t._id})))){e.next=12;break}return e.abrupt("return",{remId:a._id,name:a.name});case 12:return e.next=14,O(t._id);case 14:return i=e.sent,A.push(i),e.abrupt("return",{remId:i._id,name:i.name});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.next=9,Promise.all(i.map(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=2;break}return e.abrupt("return",t);case 2:if("m"!==t.i){e.next=4;break}return e.abrupt("return",t.text);case 4:if(!a){e.next=12;break}return e.t1='<a href="#" data-source="'.concat(r,'" data-target="').concat(t.remId,'" onclick="handleFocus(this)">'),e.next=8,F(t.name,n,void 0,!1);case 8:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2,"</a>"),e.next=13;break;case 12:e.t0=F(t.name,n,void 0,!1);case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return o=e.sent,e.abrupt("return",o.join(""));case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function e(){var t,n,r,a,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.RemNoteAPI.v0.get_context();case 2:return t=e.sent,e.next=5,window.RemNoteAPI.v0.get(t.documentId);case 5:return n=e.sent,e.next=8,Promise.all(n.visibleRemOnDocument.map((function(e){return O(e)})));case 8:return(r=e.sent.filter((function(e){return e.found}))).push(n),e.next=12,Promise.all(r.map((function(e){return F(e.name,r,e._id,!0)})));case 12:return a=e.sent,i=a.map((function(e){return C(e).split(" ").map((function(e,t){return t%2===0?e:e+"\n"})).join(" ")})),e.next=16,Promise.all(r.map((function(e){return T(e.content,r,e._id,!0)})));case 16:return o=e.sent,c=r.map((function(e,t){var n=i[t],r=E(n," ",15),c=r>=0?"".concat(n.substr(0,r),"..."):n;return{data:{id:e._id,title:c,fullTitle:a[t],content:o[t],nodeColor:e.isDocument?"yellow":"red"}}})).filter((function(e){return e.data&&e.data.title})),r.forEach((function(e){e.children.length>0&&c.push.apply(c,Object(x.a)(e.children.map((function(t){return{data:{id:"".concat(e.id,"-").concat(t),source:e._id,target:t,target_arrow_shape:"diamond",line_color:"#ccc"}}})))),Array.isArray(e.content)&&c.push.apply(c,Object(x.a)(e.content.filter((function(e){return"q"===e.i})).map((function(t){return{data:{id:"".concat(e._id,"-").concat(t._id),source:e._id,target:t._id,target_arrow_shape:"vee",line_color:"orange"}}})))),Array.isArray(e.name)&&c.push.apply(c,Object(x.a)(e.name.filter((function(e){return"q"===e.i})).map((function(t){return{data:{id:"".concat(e._id,"-").concat(t._id),source:e._id,target:t._id,target_arrow_shape:"vee",line_color:"orange"}}}))))})),e.abrupt("return",I(c));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){return D.apply(this,arguments)};function N(e){var t=e.popperRef(),n=document.createElement("div");e.tippy=Object(w.o)(n,{onCreate:function(e){e.popperInstance.reference=t},lazy:!1,plugins:[y.a],content:function(){var t=document.createElement("div"),n=e.data(),r=n.fullTitle,a=n.content,i=document.createElement("h3");if(i.appendChild(j(r)),t.appendChild(i),a){var o=document.createElement("div");o.appendChild(j(a)),t.appendChild(o)}return t},arrow:!0,placement:"bottom",hideOnClick:!1,multiple:!0,interactive:!0,sticky:!0,appendTo:document.body,trigger:"manual"})}window.handleFocus=function(e){var t=window.cy;t.fit(t.$("#".concat(e.dataset.source,", #").concat(e.dataset.target)),100)};var S={name:"cose-bilkent",quality:"default",nodeDimensionsIncludeLabels:!0,fit:!0,padding:50,randomize:!0,nodeRepulsion:2e4,idealEdgeLength:70,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5,animationEasing:"ease-out",animationDuration:1e3};function B(){Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,n=t.filter((function(e){return!!e.data.title||t.some((function(t){return t.data.id===e.data.source}))&&t.some((function(t){return t.data.id===e.data.target}))})),m.a.use(b.a),m.a.use(g.a),(r=m()({container:document.getElementById("cy"),elements:n,style:[{selector:"node",style:{"background-color":"data(nodeColor)",label:"data(title)",color:" #66ff66","font-size":"10px","text-wrap":"wrap","text-overflow-wrap":"anywhere"}},{selector:"node[[degree = 0]]",style:{width:8,height:8}},{selector:"node[[degree >= 1]][[degree <= 3]]",style:{width:10,height:10}},{selector:"node[[degree > 3]][[degree <= 5]]",style:{width:12,height:12}},{selector:"node[[degree > 5]][[degree <= 7]]",style:{width:14,height:14}},{selector:"node[[degree > 7]][[degree <= 9]]",style:{width:16,height:16}},{selector:"node[[degree > 9]]",style:{width:18,height:18}},{selector:"edge",style:{width:1,"line-color":"data(line_color)","target-arrow-color":"data(line_color)","target-arrow-shape":"data(target_arrow_shape)","curve-style":"bezier","arrow-scale":1}},{selector:"node.highlight",style:{"border-color":"#FFF","border-width":"1px"}},{selector:"node.semitransp",style:{opacity:"0.2"}},{selector:"edge.highlight",style:{"mid-target-arrow-color":"#FFF"}},{selector:"edge.semitransp",style:{opacity:"0.2"}}],layout:S})).ready((function(){window.cy=r,r.elements().forEach((function(e){e.isNode()&&(N(e),e.unbind("select"),e.bind("select",(function(e){return e.target.tippy.show()})),e.unbind("unselect"),e.bind("unselect",(function(e){return e.target.tippy.hide()})))})),r.on("mouseover","node",(function(e){var t=e.target;r.elements().difference(t.outgoers().union(t.incomers())).not(t).addClass("semitransp"),t.addClass("highlight").outgoers().union(t.incomers()).addClass("highlight")})),r.on("mouseout","node",(function(e){var t=e.target;r.elements().removeClass("semitransp"),t.removeClass("highlight").outgoers().union(t.incomers()).removeClass("highlight")}))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var e=Object(r.useCallback)((function(){var e=window.cy;e&&e.layout(Object(s.a)({},S,{randomize:!0})).run()}),[]),t=Object(r.useCallback)(Object(p.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.cy)){e.next=7;break}return e.next=4,q();case 4:n=e.sent,r=n.filter((function(e){return!!e.data.title||n.some((function(t){return t.data.id===e.data.source}))&&n.some((function(t){return t.data.id===e.data.target}))})),t.json({elements:r});case 7:case"end":return e.stop()}}),e)}))),[]),n=Object(r.useCallback)((function(){var e=window.cy;e&&e.fit()}),[]);return a.a.createElement("div",null,a.a.createElement("div",{id:"cy"}),a.a.createElement("div",{className:"action-buttons"},a.a.createElement("button",{type:"button",onClick:n},"Center"),a.a.createElement("button",{type:"button",onClick:t},"Refresh"),a.a.createElement("button",{type:"button",onClick:e},"Rearrange")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a({dsn:"https://1eb6d95377504cdfb3fd3c6629548b7d@o203432.ingest.sentry.io/1318613"}),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(u.a,{fallback:function(){return a.a.createElement("div",null,"An error has occurred, please message me (@nhanvu327) for this.")},showDialog:!0},a.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.fd4bd923.chunk.js.map